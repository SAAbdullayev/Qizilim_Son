@model MainViewModel


@{
    Layout = "_LayoutStore";
}


@{
    if (User.IsInRole("Shop"))
    {
        
        <div class="banner">
            <div id="banner" class="banner-shop-page owl-carousel owl-theme">
                @foreach (var item in Model.Advertisement)
                {
                    <div class="banner-div">
                        <img class="banner-area" src="~/photouploads/images/@item.Image" alt="">
                    </div>
                }


            </div>
        </div>
        <div class="shop-details-main-div">
            <div class="shop-details-img-follow-div">
                <div class="shop-img-div">
                    <div class="shop-img">

                        <img class="shop-page-img" src="~/photouploads/ShopImages/@ViewBag.User.ProfileImg" alt="">
                    </div>
                    <div class="add-new-button-div">
                        <a asp-controller="account" asp-action="addProduct">
                            <div class="add-new-button-buton" id="follow-button">
                                <div id="follow-button-svg-div">


                                </div>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-square" viewBox="0 0 16 16" style="margin-right:3px;">
                                    <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z" />
                                    <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z" />
                                </svg>Yeni elan
                            </div>
                        </a>

                    </div>
                    <a class="edit-user-bttn" asp-route-id="@ViewBag.User.Id"  asp-controller="account" asp-action="editShopAccount">

                        <button type="button" class="css-button shop-edit-button">
                            <span class="css-button-icon">
                                <i class="fa fa-pencil"></i>
                            </span>
                            <span class="css-button-text">
                                <span>Hesabi idare et</span>
                            </span>
                        </button>
                    </a>
                </div>
            </div>
            <div class="shop-details-name-description">
                <div class="shop-name-div-main">
                    <span class="shop-name-div"><u>@ViewBag.User.shopName</u></span>
                </div>

                <div class="follower-counter-div">
                    <span class="follower-counter-span" id="follower-counter">@ViewBag.User.FollowerCount</span><span class="follower-word-span">Follower</span>
                </div>
                <div class="shop-description-div">
                    <div class="shop-description">
                        <span>@ViewBag.User.aboutShop</span>
                    </div>
                </div>

            </div>
            <div class="shop-contact-details-div">
                <div class="shop-contact-loaction">
                    <span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-shop-window" viewBox="0 0 16 16">
                            <path d="M2.97 1.35A1 1 0 0 1 3.73 1h8.54a1 1 0 0 1 .76.35l2.609 3.044A1.5 1.5 0 0 1 16 5.37v.255a2.375 2.375 0 0 1-4.25 1.458A2.371 2.371 0 0 1 9.875 8 2.37 2.37 0 0 1 8 7.083 2.37 2.37 0 0 1 6.125 8a2.37 2.37 0 0 1-1.875-.917A2.375 2.375 0 0 1 0 5.625V5.37a1.5 1.5 0 0 1 .361-.976l2.61-3.045zm1.78 4.275a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 1 0 2.75 0V5.37a.5.5 0 0 0-.12-.325L12.27 2H3.73L1.12 5.045A.5.5 0 0 0 1 5.37v.255a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0zM1.5 8.5A.5.5 0 0 1 2 9v6h12V9a.5.5 0 0 1 1 0v6h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1V9a.5.5 0 0 1 .5-.5zm2 .5a.5.5 0 0 1 .5.5V13h8V9.5a.5.5 0 0 1 1 0V13a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V9.5a.5.5 0 0 1 .5-.5z" />
                        </svg> @ViewBag.User.shopLocation
                    </span>
                </div>
                <div class="shop-contact-header">
                    <span>Əlaqə məlumatları :</span>
                </div>
                <div class="shop-contact-details">
                    <ul class="shop-page-contact-list-ul">

                        <li class="shop-page-contacts-li">
                            <a href="#">
                                <img class="shop-list-li-img" src="../../Main/images/asist-imgs/phone.png" alt="">
                                @ViewBag.User.shopNumber


                            </a>
                        </li>

                        <li class="shop-page-contacts-li">
                            <a href="#">
                                <img class="shop-list-li-img" src="../../Main/images/asist-imgs/whatsapp-svgrepo-com.svg" alt="">
                                @ViewBag.User.whatsappNumber

                            </a>
                        </li>

                        <li class="shop-page-contacts-li">
                            <a href="#">
                                <img class="shop-list-li-img" src="../../Main/images/asist-imgs/instagram-svgrepo-com.svg" alt="">
                                @ViewBag.User.instagramLink
                            </a>
                        </li>

                        <li class="shop-page-contacts-li">
                            <a href="#">
                                <img class="shop-list-li-img" src="../../Main/images/asist-imgs/tiktok-icon-white-1-logo-svgrepo-com.svg" alt="">
                                @ViewBag.User.tiktokLink
                            </a>
                        </li>
                    </ul>


                </div>
            </div>
        </div>



        <div class="premium-products-shop">
            <div class="vip-child-div">
                <div class="vip-text-premium-shop">Mağazanın premium elanlar</div>
                <!-- <div class="all-vip-btn"><button class="btn-shw-all-vip">Butun Vip Elanlar</button></div> -->
            </div>
            <div class="praducts">
                @foreach (var item in Model.Products.OrderByDescending(p=>p.IreliCekilmisProduct == true))
                {
            @if (item.PremiumProduct)
            {
            <a asp-controller="Store" asp-action="ProductSingle" asp-route-id="@item.Id" style="text-decoration: none;">
                <div class="container">

                    <div class="image">
                        <img src="~/photouploads/ProductImages/@item.ProductImages.FirstOrDefault().Image.Path" alt="">
                    </div>
                    <div class="info">

                        <div class="price-vip"><span>@item.Price AZN</span><i class="fa-solid fa-gem" style="color: #C1957C;"></i></div>

                        <div class="prob-weight-div">

                            <div class="prob">
                                @item.ProductEyar.FirstOrDefault().Eyar.EyarOlcusu
                            </div>
                            <div class="weight">@item.Weight gr</div><span class="sep-w-c">/</span>
                            @if (item.HasDiamond)
                            {
            <div class="carat">@item.CountDiamond ct</div>                        }

                        </div>
                        <div class="title-of-product">@item.aboutProduct.HtmlToPlainText().ToEllipse(20)</div>

                        <div class="time">Bakı, @item.CreatedDate.ToString("MMM d, yyyy")</div>
                    </div>
                </div>
            </a>}}


            </div>

        </div>

        <div class="vip-products-text-area">
            <div class="vip-child-div">
                <div class="vip-text">Mağazanın elanları</div>
                <div class="all-vip-btn"><button class="btn-shw-all-vip">Butun Vip Elanlar</button></div>
            </div>

        </div>

        <div class="praducts">
            @foreach (var item in Model.Products.OrderByDescending(p=>p.IreliCekilmisProduct == true))
            {
                if (item.PremiumProduct)
                {
                    continue;
                }
                else 
                {
                    <a asp-controller="Store" asp-action="ProductSingle" asp-route-id="@item.Id" style="text-decoration: none;">
                        <div class="container">

                            <div class="image">
                                <img src="~/photouploads/ProductImages/@item.ProductImages.FirstOrDefault().Image.Path" alt="">
                            </div>
                            <div class="info">

                                <div class="price-vip"><span>@item.Price AZN</span>
                                
                                </div>

                                <div class="prob-weight-div">

                                    <div class="prob">
                                        @item.ProductEyar.FirstOrDefault().Eyar.EyarOlcusu
                                    </div>
                                    <div class="weight">@item.Weight gr</div><span class="sep-w-c">/</span>
                                    @if (item.HasDiamond)
                                    {
            <div class="carat">@item.CountDiamond ct</div>}

                                </div>
                                <div class="title-of-product">@item.aboutProduct.HtmlToPlainText().ToEllipse(20)</div>

                                <div class="time">Bakı, @item.CreatedDate.ToString("MMM d, yyyy")</div>
                            </div>
                        </div>
                    </a>
                }
                
                    
                
            }

        </div>
    }
    else
    {
        <div class="banner">
            <div id="banner" class="banner-shop-page owl-carousel owl-theme">
                @foreach (var item in Model.Advertisement)
                {
                    <div class="banner-div">
                        <img class="banner-area" src="~/photouploads/images/@item.Image" alt="">
                    </div>
                }


            </div>
        </div>
        <div class="shop-details-main-div">
            <div class="shop-details-img-follow-div">
                <div class="shop-img-div">
                    <div class="shop-img">

                        <img class="user-page-img" src="@ViewBag.User.ProfileImg" alt="">
                    </div>

                </div>
                <div class="shop-details-name-description user-desc ">
                    <div class="shop-name-div-main">
                        <span class="shop-name-div"><u>@ViewBag.User.UserName</u></span>
                    </div>
                    <div class="follower-counter-div">
                        <a asp-controller="Store" asp-action="Stores" class="following-page"><span class="follower-counter-span" id="follower-counter">2323</span><span class="follower-word-span">Following</span></a>
                    </div>
                    <div class="follower-counter-div">
                        <a asp-controller="homepage" asp-action="liked" class="following-page"><span class="follower-counter-span" id="follower-counter">Beyendiklerim</span>
                        
                        
                        
                        
                        
                            @{ 
                                var count = 0;
                            }
                            @if (ViewBag.LikedProducts != null)
                            {
                                @foreach (var item in ViewBag.LikedProducts)
                                {
                                    count++;
                                }
                                <span class="follower-word-span user-liked">( @count ) </span>
                            }
                            else 
                            {
                                @count
                            }





                        </a>
                    </div>
                    <div class="editprofile">
                        <!-- <button class="edit-profile"> <img src="../Main/images/asist-imgs/pencil-svgrepo-com.svg" alt="" srcset=""> Hesabi idare et</button> -->
                        <a class="editUser" asp-controller="account" asp-action="detailUser" asp-route-id="@ViewBag.User.Id">
                            <button type="button" class="css-button">
                                <span class="css-button-icon">
                                    <i class="fa fa-pencil"></i>
                                </span>
                                <span class="css-button-text">
                                    <span>Hesabi idare et</span>
                                </span>
                            </button>

                        </a>

                    </div>

                </div>
            </div>


        </div>



        <div class="my-premium-products-shop">
            <div class="vip-products-text-area">
                <div class="vip-child-div">
                    <div class="vip-text">Izlediyim Magazalar<span class="count-myshops">(<a asp-controller="Store" asp-action="Stores">77</a>)</span></div>
                    <!-- <div class="all-vip-btn"><button class="btn-shw-all-vip">Butun Vip Elanlar</button></div> -->
                </div>

            </div>
            <div class="shops-content-area">

                <div class="my-shops-content-area-div ">
                    @foreach (var item in ViewBag.Shops)
                    {
                        <a class="shops-content-att" asp-controller="store" asp-action="storesingle" asp-route-id="@item.Id">
                            <div class="shops-content">
                                <div class="img-card-shop">
                                    <img src="~/photouploads/ShopImages/@item.ProfileImg" alt="">
                                </div>
                                <div class="shop-name-highlight">
                                    @item.shopName
                                </div>
                                <div class="location-card">
                                    <img src="../../Main/images/asist-imgs/location-sign-svgrepo-com.svg" alt="">
                                    <span>@item.shopLocation</span>
                                </div>
                                <div class="about-shop-card">
                                    @item.aboutShop
                                </div>
                                <div class="contact-card">
                                    <img src="../../Main/images/asist-imgs/phone.png" alt="">
                                    <span>
                                        : @item.shopNumber
                                    </span>

                                </div>

                            </div>
                        </a>
                    }

                </div>
            </div>

        </div>

        <div class="vip-products-text-area">
            <div class="vip-child-div">
                <div class="vip-text">Son elanlar</div>
                <!-- <div class="all-vip-btn"><button class="btn-shw-all-vip">Butun Vip Elanlar</button></div> -->
            </div>

        </div>

        <div class="praducts">
            @foreach (var item in Model.Products)
            {
                <a asp-controller="Store" asp-action="ProductSingle" asp-route-id="@item.Id" style="text-decoration: none;">
                    <div class="container">

                        <div class="image">
                            <img src="~/photouploads/ProductImages/@item.ProductImages.FirstOrDefault().Image.Path" alt="">
                        </div>
                        <div class="info">

                            <div class="price-vip"><span>@item.Price AZN</span><i class="fa-solid fa-gem" style="color: #C1957C;"></i></div>

                            <div class="prob-weight-div">

                                <div class="prob">
                                    @item.ProductEyar.FirstOrDefault().Eyar.EyarOlcusu
                                </div>
                                <div class="weight">@item.Weight gr</div><span class="sep-w-c">/</span>
                                @if (item.HasDiamond)
                                {
                                    <div class="carat">@item.CountDiamond ct</div>
                                }

                            </div>
                            <div class="title-of-product">@item.aboutProduct.HtmlToPlainText().ToEllipse(20)</div>

                            <div class="time">Bakı, @item.CreatedDate.ToString("MMM d, yyyy")</div>
                        </div>
                    </div>
                </a>
            }

        </div>
    }
}

